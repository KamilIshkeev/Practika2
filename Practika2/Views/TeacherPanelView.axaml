<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="Practika2.Views.TeacherPanelView">
    
    <TabControl x:Name="MainTabControl">
        <TabItem Header="ÐœÐ¾Ð¸ ÐºÑƒÑ€ÑÑ‹">
            <StackPanel Margin="16" Spacing="16">
                <TextBlock Text="ÐšÑƒÑ€ÑÑ‹, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ñ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°ÑŽ" Classes="heading"/>
                <ItemsControl x:Name="TeacherCoursesItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Classes="courseCard" Margin="0,0,0,16">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{Binding Title}" 
                                                   FontSize="18" 
                                                   FontWeight="Bold" 
                                                   Foreground="#2E7D32"
                                                   Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding Description}" 
                                                   TextWrapping="Wrap"
                                                   Foreground="#546E7A"
                                                   Margin="0,0,0,8"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                        <Button Content="ðŸ“š Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ" 
                                                CommandParameter="{Binding}"
                                                Click="OnManageCourseClick"/>
                                        <Button Content="ðŸ“Š ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°" 
                                                CommandParameter="{Binding}"
                                                Click="OnViewAnalyticsClick"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="Ð£Ñ€Ð¾ÐºÐ¸ Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñ‹">
            <StackPanel Margin="16" Spacing="16">
                <TextBlock Text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÑƒÑ€Ð¾ÐºÐ°Ð¼Ð¸" Classes="heading"/>
                <ComboBox x:Name="CourseSelectorComboBox" 
                          SelectionChanged="OnCourseSelected"
                          Margin="0,0,0,16"/>
                
                <Button x:Name="AddLessonButton" 
                        Content="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑƒÑ€Ð¾Ðº" 
                        Classes="primary"
                        HorizontalAlignment="Left"
                        Click="OnAddLessonClick"
                        IsEnabled="False"/>
                
                <ItemsControl x:Name="LessonsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Classes="courseCard" Margin="0,0,0,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{Binding Title}" 
                                                   FontWeight="Bold"
                                                   Margin="0,0,0,4"/>
                                        <TextBlock Text="{Binding Type}" 
                                                   Foreground="#546E7A"
                                                   FontSize="12"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                        <Button Content="âœï¸" 
                                                CommandParameter="{Binding}"
                                                Click="OnEditLessonClick"/>
                                        <Button Content="ðŸ—‘ï¸" 
                                                CommandParameter="{Binding}"
                                                Click="OnDeleteLessonClick"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="Ð¢ÐµÑÑ‚Ñ‹">
            <StackPanel Margin="16" Spacing="16">
                <TextBlock Text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ñ‚ÐµÑÑ‚Ð°Ð¼Ð¸" Classes="heading"/>
                <ComboBox x:Name="TestCourseSelectorComboBox" 
                          SelectionChanged="OnTestCourseSelected"
                          Margin="0,0,0,16"/>
                
                <Button x:Name="CreateTestButton" 
                        Content="âž• Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ‚ÐµÑÑ‚" 
                        Classes="primary"
                        HorizontalAlignment="Left"
                        Click="OnCreateTestClick"
                        IsEnabled="False"/>
                
                <ItemsControl x:Name="TestsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Classes="courseCard" Margin="0,0,0,8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{Binding Title}" 
                                                   FontWeight="Bold"
                                                   Margin="0,0,0,4"/>
                                        <TextBlock Text="{Binding PassingScorePercent, StringFormat='ÐŸÑ€Ð¾Ñ…Ð¾Ð´Ð½Ð¾Ð¹ Ð±Ð°Ð»Ð»: {0}%'}" 
                                                   Foreground="#546E7A"
                                                   FontSize="12"/>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                        <Button Content="âœï¸" 
                                                CommandParameter="{Binding}"
                                                Click="OnEditTestClick"/>
                                        <Button Content="ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°" 
                                                CommandParameter="{Binding}"
                                                Click="OnTestStatsClick"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ° Ð·Ð°Ð´Ð°Ð½Ð¸Ð¹">
            <StackPanel Margin="16" Spacing="16">
                <TextBlock Text="Ð—Ð°Ð´Ð°Ð½Ð¸Ñ Ð½Ð° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÑƒ" Classes="heading"/>
                <ItemsControl x:Name="SubmissionsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Classes="courseCard" Margin="0,0,0,16">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="{Binding Assignment.Title}" 
                                               FontWeight="Bold"
                                               FontSize="16"/>
                                    <TextBlock Text="{Binding Student.Username, StringFormat='Ð¡Ñ‚ÑƒÐ´ÐµÐ½Ñ‚: {0}'}" 
                                               Foreground="#546E7A"/>
                                    <TextBlock Text="{Binding Content}" 
                                               TextWrapping="Wrap"
                                               Margin="0,8,0,8"/>
                                    <StackPanel Orientation="Horizontal" Spacing="8">
                                        <TextBox x:Name="PointsTextBox" 
                                                 Text="{Binding Points}"
                                                 Watermark="Ð‘Ð°Ð»Ð»Ñ‹" 
                                                 Width="100"/>
                                        <TextBox x:Name="CommentTextBox" 
                                                 Text="{Binding Comment}"
                                                 Watermark="ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹" 
                                                 Width="300"/>
                                        <Button Content="âœ… Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ"
                                                CommandParameter="{Binding}"
                                                Click="OnGradeSubmissionClick"/>
                                        <Button Content="âœï¸ Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ"
                                                CommandParameter="{Binding}"
                                                IsVisible="{Binding Points, Converter={StaticResource NotNullToBoolConverter}}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="Ð’ÐµÐ±Ð¸Ð½Ð°Ñ€Ñ‹">
            <StackPanel Margin="16" Spacing="16">
                <TextBlock Text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²ÐµÐ±Ð¸Ð½Ð°Ñ€Ð°Ð¼Ð¸" Classes="heading"/>
                <Button x:Name="CreateWebinarButton" 
                        Content="âž• Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð²ÐµÐ±Ð¸Ð½Ð°Ñ€" 
                        Classes="primary"
                        HorizontalAlignment="Left"
                        Click="OnCreateWebinarClick"/>
                
                <ItemsControl x:Name="WebinarsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Classes="courseCard" Margin="0,0,0,8">
                                <StackPanel>
                                    <TextBlock Text="{Binding Lesson.Title}" 
                                               FontWeight="Bold"
                                               Margin="0,0,0,4"/>
                                    <TextBlock Text="{Binding ScheduledAt, StringFormat='Ð—Ð°Ð¿Ð»Ð°Ð½Ð¸Ñ€Ð¾Ð²Ð°Ð½: {0:dd.MM.yyyy HH:mm}'}" 
                                               Foreground="#546E7A"/>
                                    <TextBlock Text="{Binding Link}" 
                                               Foreground="#2E7D32"
                                               Margin="0,4,0,0"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="ÐžÐ±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ">
            <StackPanel Margin="16" Spacing="16">
                <TextBlock Text="ÐžÐ±ÑÑƒÐ¶Ð´ÐµÐ½Ð¸Ñ ÐºÑƒÑ€ÑÐ¾Ð²" Classes="heading"/>
                <ItemsControl x:Name="DiscussionsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Classes="courseCard" Margin="0,0,0,8">
                                <StackPanel Spacing="8">
                                    <TextBlock Text="{Binding Title}" 
                                               FontWeight="Bold"/>
                                    <TextBlock Text="{Binding Messages.Count, StringFormat='Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ð¹: {0}'}" 
                                               Foreground="#546E7A"/>
                                    <Button Content="ðŸ’¬ ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ" 
                                            CommandParameter="{Binding}"
                                            Click="OnOpenDiscussionClick"
                                            HorizontalAlignment="Left"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="ÐÐ½Ð¾Ð½ÑÑ‹">
            <StackPanel Margin="16" Spacing="16">
                <TextBlock Text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð°Ð½Ð¾Ð½ÑÐ°Ð¼Ð¸" Classes="heading"/>
                <Button x:Name="CreateAnnouncementButton" 
                        Content="âž• Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð°Ð½Ð¾Ð½Ñ" 
                        Classes="primary"
                        HorizontalAlignment="Left"
                        Click="OnCreateAnnouncementClick"/>
                
                <ItemsControl x:Name="AnnouncementsItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Classes="courseCard" Margin="0,0,0,8">
                                <StackPanel>
                                    <TextBlock Text="{Binding Title}" 
                                               FontWeight="Bold"
                                               Margin="0,0,0,4"/>
                                    <TextBlock Text="{Binding Content}" 
                                               TextWrapping="Wrap"
                                               Foreground="#546E7A"/>
                                    <TextBlock Text="{Binding CreatedAt, StringFormat='Ð¡Ð¾Ð·Ð´Ð°Ð½: {0:dd.MM.yyyy}'}" 
                                               Foreground="#546E7A"
                                               FontSize="12"
                                               Margin="0,4,0,0"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° ÐºÑƒÑ€ÑÐ°">
            <StackPanel Margin="16" Spacing="16">
                <TextBlock Text="ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ° Ð¿Ð¾ ÐºÑƒÑ€ÑÑƒ" Classes="heading"/>
                <ComboBox x:Name="AnalyticsCourseSelectorComboBox"
                            SelectionChanged="OnAnalyticsCourseSelected"
                            Margin="0,0,0,16"/>
                <Button Content="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" Click="OnRefreshAnalyticsClick"/>
                <DataGrid x:Name="AnalyticsGrid" AutoGenerateColumns="False" IsReadOnly="True">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Ð¡Ñ‚ÑƒÐ´ÐµÐ½Ñ‚" Binding="{Binding Student.Username}" Width="*"/>
                        <DataGridTextColumn Header="ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑ" Binding="{Binding Progress}" Width="*"/>
                    </DataGrid.Columns>
                </DataGrid>
            </StackPanel>
        </TabItem>
    </TabControl>
</UserControl>


