<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:lvc="using:LiveChartsCore.SkiaSharpView.Avalonia"
             x:Class="Practika2.Views.AdminPanelView">
    
    <TabControl>
        <TabItem Header="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ ÐºÑƒÑ€ÑÐ°Ð¼Ð¸">
            <StackPanel Margin="16" Spacing="16">
                <Button x:Name="CreateCourseButton" 
                        Content="âž• Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ ÐºÑƒÑ€Ñ" 
                        Classes="primary"
                        HorizontalAlignment="Left"
                        Click="OnCreateCourseClick"/>
                
                <ItemsControl x:Name="AllCoursesItemsControl">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Classes="courseCard" Margin="0,0,0,16">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{Binding Title}" 
                                                   FontSize="18" 
                                                   FontWeight="Bold" 
                                                   Foreground="#2E7D32"
                                                   Margin="0,0,0,8"/>
                                        <TextBlock Text="{Binding Description}" 
                                                   TextWrapping="Wrap"
                                                   Foreground="#546E7A"
                                                   Margin="0,0,0,8"/>
                                        <StackPanel Orientation="Horizontal" Spacing="12">
                                            <TextBlock Text="{Binding IsPublished, StringFormat='ÐžÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ¾Ð²Ð°Ð½: {0}'}" 
                                                       Foreground="#546E7A"/>
                                            <TextBlock Text="{Binding IsArchived, StringFormat='ÐÑ€Ñ…Ð¸Ð²Ð¸Ñ€Ð¾Ð²Ð°Ð½: {0}'}" 
                                                       Foreground="#546E7A"/>
                                        </StackPanel>
                                        <TextBlock Text="ÐŸÑ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»Ð¸:" FontWeight="Bold" Margin="0,8,0,4"/>
                                        <ItemsControl ItemsSource="{Binding Teachers}">
                                            <ItemsControl.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding Teacher.Username}" Foreground="#546E7A"/>
                                                </DataTemplate>
                                            </ItemsControl.ItemTemplate>
                                        </ItemsControl>
                                    </StackPanel>
                                    
                                    <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="8">
                                        <Button Content="âœï¸" 
                                                CommandParameter="{Binding}"
                                                Click="OnEditCourseClick"/>
                                        <Button Content="ðŸ—‘ï¸" 
                                                CommandParameter="{Binding}"
                                                Click="OnDeleteCourseClick"/>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </StackPanel>
        </TabItem>
        
        <TabItem Header="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸">
			<Grid Margin="16" RowDefinitions="Auto,Auto,*" ColumnDefinitions="*,*">
				<TextBlock Grid.Row="0" Grid.ColumnSpan="2" Text="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑÐ¼Ð¸" Classes="subheading"/>
				
				<StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Spacing="8" Margin="0,8,0,8">
					<Button Content="ðŸ”„ ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ" Click="OnRefreshUsersClick"/>
					<Button Content="âž• Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ" Click="OnAddUserClick"/>
				</StackPanel>
				
				<DataGrid Grid.Row="2" Grid.ColumnSpan="2" x:Name="UsersGrid" AutoGenerateColumns="False" IsReadOnly="True">
					<DataGrid.Columns>
						<DataGridTextColumn Header="ID" Binding="{Binding Id}" Width="60"/>
						<DataGridTextColumn Header="Ð›Ð¾Ð³Ð¸Ð½" Binding="{Binding Username}" Width="*"/>
						<DataGridTextColumn Header="Email" Binding="{Binding Email}" Width="2*"/>
						<DataGridTextColumn Header="Ð Ð¾Ð»ÑŒ" Binding="{Binding Role}" Width="*"/>
						<DataGridCheckBoxColumn Header="Ð—Ð°Ð±Ð»Ð¾ÐºÐ¸Ñ€Ð¾Ð²Ð°Ð½" Binding="{Binding IsBlocked}" Width="120"/>
						<DataGridTemplateColumn Header="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ" Width="220">
							<DataGridTemplateColumn.CellTemplate>
								<DataTemplate>
									<StackPanel Orientation="Horizontal" Spacing="8">
										<Button Content="ðŸš« Ð‘Ð»Ð¾Ðº" CommandParameter="{Binding}" Click="OnBlockUserClick"/>
										<Button Content="âœ… Ð Ð°Ð·Ð±Ð»Ð¾Ðº" CommandParameter="{Binding}" Click="OnUnblockUserClick"/>
									</StackPanel>
								</DataTemplate>
							</DataGridTemplateColumn.CellTemplate>
						</DataGridTemplateColumn>
					</DataGrid.Columns>
				</DataGrid>
				
				<!-- ÐÐ°Ð·Ð½Ð°Ñ‡ÐµÐ½Ð¸Ðµ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»Ñ ÐºÑƒÑ€ÑÑƒ -->
				<StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Spacing="8" HorizontalAlignment="Right">
					<TextBlock Text="ÐšÑƒÑ€Ñ ID:" VerticalAlignment="Center"/>
					<TextBox x:Name="AssignCourseIdTextBox" Width="100"/>
					<TextBlock Text="ÐŸÑ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»ÑŒ ID:" VerticalAlignment="Center"/>
					<TextBox x:Name="AssignTeacherIdTextBox" Width="100"/>
					<Button Content="ðŸ‘¨â€ðŸ« ÐÐ°Ð·Ð½Ð°Ñ‡Ð¸Ñ‚ÑŒ" Click="OnAssignTeacherClick"/>
				</StackPanel>
			</Grid>
        </TabItem>
		
		<TabItem Header="ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°">
			<ScrollViewer Margin="16">
				<StackPanel Spacing="16">
					<TextBlock Text="ÐÐ½Ð°Ð»Ð¸Ñ‚Ð¸ÐºÐ°" Classes="heading"/>
					<Button Content="ðŸ”„ ÐŸÐµÑ€ÐµÑÑ‡Ð¸Ñ‚Ð°Ñ‚ÑŒ" Click="OnCalculateAnalyticsClick"/>

					<TextBlock Text="Ð”Ð¾Ñ…Ð¾Ð´Ñ‹ Ð¿Ð¾ ÐºÑƒÑ€ÑÐ°Ð¼" Classes="subheading"/>
					<lvc:CartesianChart Series="{Binding RevenueSeries}" Height="300"/>

					<TextBlock Text="Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¸Ñ ÐºÑƒÑ€ÑÐ¾Ð²" Classes="subheading"/>
					<lvc:CartesianChart Series="{Binding CompletionsSeries}" Height="300"/>
				</StackPanel>
			</ScrollViewer>
		</TabItem>
    </TabControl>
</UserControl>




